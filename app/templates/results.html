{% extends "base.html" %}

{% block title %}Résultat du scrutin{% endblock %}
<!-- http://127.0.0.1:5000/scrutins/result/6782fa6a787efb10903417f9 -->

{% block content %}
    <div class="vote-container">
        <div>
            <h1>{{ result.title }}</h1>
            <p>{{ result.description }}</p>
            <p>Créer par <span>@{{ result.creator_pseudonym }}</span></p>

            {% if result.ranking %}
                <div class="result-trophy">
                    {% for r in result.ranking %}
                        {% if loop.index <= 3 %}
                        <div class="trophy-{{ loop.index }}">
                            <svg width="108" height="108" viewBox="0 0 108 108" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M54.001 0.25C44.862 0.25 37.3065 1.05495 31.492 2.03595L30.8178 2.14915C25.7667 2.99465 21.5683 3.69745 18.2856 7.7404C16.1804 10.3332 15.5012 13.1353 15.3446 16.2655L12.8843 17.0856C10.5687 17.8573 8.53906 18.5338 6.92886 19.2828C5.18811 20.0926 3.59286 21.1357 2.37331 22.8278C1.15381 24.5198 0.668763 26.3631 0.451013 28.2705C0.249613 30.035 0.249813 32.1744 0.250013 34.6152L0.250063 35.3413C0.250013 37.3504 0.249962 39.1248 0.398262 40.6089C0.559012 42.2174 0.914963 43.7811 1.80416 45.292C2.69336 46.8035 3.88741 47.874 5.21536 48.7955C6.44066 49.646 7.99181 50.5075 9.74811 51.483L22.9539 58.82C25.6509 64.126 29.3558 68.8565 34.4509 72.274C38.8861 75.2485 44.209 77.116 50.514 77.615C50.3435 78.0435 50.25 78.511 50.25 79V87.75H43.0991C38.9281 87.75 35.337 90.694 34.519 94.784L33.4258 100.25H24C21.929 100.25 20.25 101.929 20.25 104C20.25 106.071 21.929 107.75 24 107.75H84C86.071 107.75 87.75 106.071 87.75 104C87.75 101.929 86.071 100.25 84 100.25H74.5745L73.481 94.784C72.663 90.694 69.072 87.75 64.901 87.75H57.75V79C57.75 78.511 57.6565 78.0435 57.486 77.615C63.7915 77.1165 69.115 75.249 73.5505 72.274C78.646 68.8565 82.3515 64.125 85.0485 58.8185L98.2515 51.483C100.008 50.5075 101.559 49.646 102.785 48.7955C104.113 47.874 105.307 46.8035 106.196 45.292C107.085 43.7811 107.441 42.2174 107.602 40.6089C107.75 39.125 107.75 37.3506 107.75 35.3417V34.6153C107.75 32.1744 107.75 30.035 107.549 28.2705C107.331 26.3631 106.846 24.5198 105.627 22.8278C104.407 21.1357 102.812 20.0926 101.071 19.2828C99.4605 18.5338 97.431 17.8573 95.1155 17.0856L92.657 16.2661C92.5005 13.1356 91.8215 10.3334 89.716 7.7404C86.433 3.69745 82.235 2.99465 77.184 2.14915L76.5095 2.03595C70.695 1.05495 63.1395 0.25 54.001 0.25ZM66.926 100.25L66.1265 96.255C66.01 95.6705 65.497 95.25 64.901 95.25H43.0991C42.5032 95.25 41.9902 95.6705 41.8734 96.255L41.0743 100.25H66.926ZM15.4425 24.1386L15.5105 24.1159C15.8684 31.7174 16.727 40.1188 18.8649 47.9685L13.5365 45.008C11.5907 43.9271 10.3724 43.2453 9.49146 42.634C8.67941 42.0704 8.41491 41.7381 8.26816 41.4887C8.12141 41.2393 7.95936 40.8467 7.86106 39.8632C7.75446 38.7963 7.75011 37.4001 7.75006 35.1742V34.8115C7.74996 32.1161 7.75556 30.4095 7.90266 29.1211C8.03876 27.9285 8.26156 27.4851 8.45771 27.213C8.65386 26.9409 9.00401 26.5893 10.0924 26.083C11.2681 25.536 12.8854 24.9909 15.4425 24.1386ZM92.491 24.1165C92.133 31.7175 91.2745 40.1182 89.137 47.9675L94.4635 45.008C96.409 43.9271 97.6275 43.2453 98.5085 42.634C99.3205 42.0704 99.585 41.7381 99.7315 41.4887C99.8785 41.2393 100.041 40.8467 100.139 39.8632C100.246 38.7963 100.25 37.4001 100.25 35.1742V34.8115C100.25 32.1161 100.244 30.4095 100.097 29.1211C99.961 27.9285 99.7385 27.4851 99.542 27.213C99.346 26.9409 98.996 26.5893 97.9075 26.083C96.7315 25.536 95.1145 24.9909 92.5575 24.1386L92.491 24.1165ZM32.7398 9.43145C38.166 8.51595 45.304 7.75 54.001 7.75C62.6975 7.75 69.8355 8.51595 75.262 9.43145C81.2965 10.4496 82.564 10.8305 83.8935 12.4679C85.2035 14.0816 85.328 15.6078 85.059 22.3836C84.611 33.6768 83.121 45.8635 78.5075 55.132C76.23 59.707 73.2525 63.4435 69.373 66.045C65.5185 68.6305 60.546 70.25 54.001 70.25C47.4555 70.25 42.4828 68.6305 38.6285 66.045C34.7492 63.4435 31.7716 59.707 29.4942 55.132C24.8805 45.8635 23.3908 33.6768 22.9424 22.3836C22.6734 15.6078 22.7978 14.0816 24.1081 12.4679C25.4376 10.8305 26.7052 10.4496 32.7398 9.43145Z" fill="currentColor"/>
                            </svg>
                            <p>{{ r }}</p>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            {% else %}
                <p>Le résultat du scrutin n'a pas encore été calculé.</p>
                {% if result._id|string == session_user_id %}
                    <form action="{{ url_for('scrutin.result', scrutin_id=scrutin_id|string) }}" method="post">
                        <button class="btn-border-anim">Calculer le résultat</button>
                    </form>
                {% endif %}
            {% endif %}
        </div>

        {% if result.ranking %}
            <div class="results">
                <ul id="sortable">
                    {% for r in result.ranking %}
                        <li class="ranking">{{ r }}</li> 
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
{% endblock %}